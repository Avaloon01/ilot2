<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Barom√®tre Coop√©ratif ‚Äî Version enrichie (TBI)</title>
<style>
  :root{
    /* Couleur de fond dynamique chang√©e par le feu tricolore */
    --bg:#f6f8fb;
    --panel:#ffffff; --ink:#1f2a44; --muted:#6b7280; --accent:#5b7cfa;
    --ok:#10b981; --warn:#f59e0b; --bad:#ef4444; --calm:#3b82f6;
    --card:#ffffff; --shadow:0 6px 20px rgba(0,0,0,.08);
  }
  html,body{height:100%}
  body{margin:0; background:var(--bg); color:var(--ink); font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .app{display:grid; grid-template-columns: 320px 1fr; gap:16px; padding:18px; max-width:1600px; margin:auto}
  header{ grid-column:1/-1; background:var(--panel); border-radius:18px; padding:16px 20px; box-shadow:var(--shadow); display:flex; align-items:center; gap:16px; flex-wrap:wrap; justify-content:space-between }
  h1{margin:0; font-size:1.6rem; letter-spacing:.3px; display:flex; align-items:center; gap:10px}
  
  .badge{font-size:.8rem; background:#eef2ff; color:#3749b5; padding:4px 10px; border-radius:999px}
  .toolbar{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
  .panel{background:var(--panel); border-radius:16px; box-shadow:var(--shadow)}
  .sidebar{padding:14px}
  .sidebar h2{font-size:1rem; margin:10px 6px; color:var(--muted)}

  .btn{appearance:none; border:1px solid #e5e7eb; background:#fff; color:var(--ink); padding:10px 12px; border-radius:12px; cursor:pointer; font-weight:600}
  .btn:hover{box-shadow:0 2px 10px rgba(0,0,0,.06)}
  .btn.primary{background:var(--accent); color:#fff; border-color:transparent}
  .btn.ghost{background:transparent; border-color:transparent; color:var(--muted)}
  .btn.icon{display:inline-flex; align-items:center; gap:8px}
  .btn.small{padding:6px 8px; font-size:.9rem; border-radius:10px}
  .btn.round{border-radius:999px; width:36px; height:36px; display:inline-grid; place-items:center}

  /* --- Feu tricolore vif (non pastel) --- */
  .traffic{display:flex;align-items:center;gap:10px}
  .traffic .label{font-weight:600}
  .light{
    width:22px;height:22px;border-radius:999px;cursor:pointer;border:none;outline:none;
    box-shadow:0 0 0 2px #fff, 0 0 0 4px rgba(0,0,0,.06);
  }
  .light.active{box-shadow:0 0 0 2px #fff, 0 0 0 6px rgba(0,0,0,.12)}
  .light.green  { background:#00C853; }   /* vert vif */
  .light.orange { background:#FF9800; }   /* orange vif */
  .light.red    { background:#F44336; }   /* rouge vif */
  .light.neutral{ background:#9E9E9E; }   /* gris neutre */

  .grid{display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap:14px; padding:10px}
  .card{background:var(--card); border-radius:16px; box-shadow:var(--shadow); padding:14px; display:grid; gap:10px}
  .card header{display:flex; justify-content:space-between; align-items:center; padding:0; box-shadow:none; background:transparent}
  input[type="text"], select, input[type="number"]{width:100%; border:1px solid #e5e7eb; border-radius:10px; padding:8px 10px; font-size:1rem; background:#fff; color:#111827}
  .stars{display:flex; align-items:center; gap:8px}
  .stars .count{font-weight:800; font-size:1.2rem}
  .hint{font-size:.85rem; color:var(--muted)}
  .scroll{max-height:60vh; overflow:auto; padding-right:6px}
  .divider{height:1px; background:#e5e7eb; margin:12px 0}
  @media (max-width: 960px){ .app{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="app" id="app">
  <header>
    <h1>üåü Barom√®tre coop√©ratif <span class="badge">Version enrichie</span></h1>

    <div class="toolbar">
      <!-- üî• Feu tricolore vif -->
      <div class="traffic" title="Couleur d'ambiance (feu)">
        <span class="label">Feu</span>
        <button class="light neutral" data-name="neutral" aria-label="Neutre"></button>
        <button class="light green"   data-name="green"   aria-label="Vert"></button>
        <button class="light orange"  data-name="orange"  aria-label="Orange"></button>
        <button class="light red"     data-name="red"     aria-label="Rouge"></button>
      </div>
    </div>
  </header>

  <main>‚Ä¶ ton contenu inchang√© ‚Ä¶</main>
</div>

<script>
(function(){
  // --- Feu vif (fond = couleur brute) ---
  const FEU_KEY = 'coop.feu.bg';
  const FONDS = {
    neutral: '#f6f8fb', // gris bleut√© par d√©faut
    green:   '#00C853', // vert vif
    orange:  '#FF9800', // orange vif
    red:     '#F44336'  // rouge vif
  };
  const lights = Array.from(document.querySelectorAll('.light'));
  function setBG(name){
    const color = FONDS[name] || FONDS.neutral;
    document.documentElement.style.setProperty('--bg', color);
    localStorage.setItem(FEU_KEY, name);
    lights.forEach(b => b.classList.toggle('active', b.dataset.name === name));
  }
  setBG(localStorage.getItem(FEU_KEY) || 'neutral');
  lights.forEach(b => b.addEventListener('click', () => setBG(b.dataset.name)));

  // ‚Ä¶ le reste du script reste inchang√© ‚Ä¶
})();
</script>
</body>
</html>
